<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untitled - rAthena Text Editor</title>
  <link rel="stylesheet" href="library/design.css">
  <link rel="stylesheet" href="library/fonts/material-icons.css">
  <link rel="icon" href="library/rte-icon.png" type="image/x-icon">
</head>
<body>
<div id="editor">




</div>
<div class="action-panel">
  <button title="toggle darkmode and lightmode" id="toggleDark" onclick="toggleTheme()"><span class="material-icons">brightness_4</span></button>
  <button title="Open File" id="openBtn"><span class="material-icons">folder_open</span></button>
  <button title="Save" id="saveBtn"><span class="material-icons">save</span></button>
  <button title="Download" id="downloadBtn" onclick="downloadEditorContent()"><span class="material-icons">file_download</span></button>
  <button title="Settings" id="Settings"><span class="material-icons">settings</span></button>
</div>
<div id="settingsPanel" class="settings-panel">
  <label>
    <input type="checkbox" id="toggleLocalCompletion">
    Enable Local Autocomplete
  </label>
</div>
<input type="file" id="fileInput" accept=".txt, .conf, .yml" />

<!-- Required Ace scripts -->
<script src="library/ace.js"></script>
<script src="library/theme-github_light_default.min.js"></script>
<script src="library/theme-monokai.min.js"></script>
<script src="library/ext-language_tools.min.js"></script>
<script src="library/ext-searchbox.min.js"></script>

<!-- Custom Highlighting Rules -->
<script src="library/rathena-highlight.js"></script>
<script src="library/init.js"></script>

<!-- Initialize the editor -->
<script>
  let currentTheme = "ace/theme/monokai";
  const editor = ace.edit("editor");

  editor.setTheme(currentTheme);
  editor.session.setMode("ace/mode/rathena");

  // Enable the language tools
  ace.require("ace/ext/language_tools");
  editor.setOptions({
    enableBasicAutocompletion: true,
    enableLiveAutocompletion: true,     // Autocomplete as you type
    behavioursEnabled: true, // <<< This enables auto-pairing
  });

  // Enable Find box (Ctrl-F)
  editor.commands.addCommand({
    name: "showSearch",
    bindKey: { win: "Ctrl-F", mac: "Command-F" },
    exec: function(editor) {
      ace.require("ace/ext/searchbox").Search(editor);
    }
  });

  // Ctrl+S triggers save
  editor.commands.addCommand({
    name: "saveToFileSystem",
    bindKey: { win: "Ctrl-S", mac: "Command-S" },
    exec: function () {
      saveToFile();
    },
    readOnly: false
  });
</script>

</body>
</html>
