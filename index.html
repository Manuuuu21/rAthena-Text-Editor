<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untitled - rAthena Text Editor</title>
  <link rel="stylesheet" href="library/design.css">
  <link rel="icon" href="library/rte-icon.png" type="image/x-icon">
</head>
<body>
<div id="editor">




</div>
<!-- Theme Buttons -->
<div class="theme-container">
  <button class="theme-button" onclick="toggleTheme()">Toggle Theme</button>
</div>
<!-- FAB Buttons -->
<div class="fab-container">
  <div class="fab-options" id="fabOptions" style="display: none;">
    <div id="saveBtn" class="fab-option">Save</div>
    <div id="openBtn" class="fab-option">Open File</div>
    <div class="fab-option" onclick="downloadEditorContent()">Download</div>
  </div>
  <button class="fab" onclick="toggleFabOptions()">+</button>
</div>
<input type="file" id="fileInput" accept=".txt, .conf, .yml" />

<!-- Required Ace scripts -->
<script src="library/ace.js"></script>
<script src="library/theme-github_light_default.min.js"></script>
<script src="library/theme-monokai.min.js"></script>
<script src="library/ext-language_tools.min.js"></script>
<script src="library/ext-searchbox.min.js"></script>

<!-- Custom Highlighting Rules -->
<script src="library/rathena-highlight.js"></script>
<script src="library/init.js"></script>

<!-- Initialize the editor -->
<script>
  let currentTheme = "ace/theme/monokai";
  const editor = ace.edit("editor");
  editor.setTheme(currentTheme);
  editor.session.setMode("ace/mode/rathena");

  // Enable the language tools
  ace.require("ace/ext/language_tools");
  editor.setOptions({
    enableBasicAutocompletion: true,    // Ctrl + Space or auto-triggered
    enableLiveAutocompletion: true,     // Autocomplete as you type
    enableSnippets: true                // Enable code snippets
  });

  // Enable Find box (Ctrl-F)
  editor.commands.addCommand({
    name: "showSearch",
    bindKey: { win: "Ctrl-F", mac: "Command-F" },
    exec: function(editor) {
      ace.require("ace/ext/searchbox").Search(editor);
    }
  });

  // Ctrl+S triggers save
  editor.commands.addCommand({
    name: "saveToFileSystem",
    bindKey: { win: "Ctrl-S", mac: "Command-S" },
    exec: function () {
      saveToFile();
    },
    readOnly: false
  });
</script>

</body>
</html>
